<div class="flight-admin-page">

  <!-- HEADER -->
  <div class="page-header">
    <div>
      <h1>Flight Management</h1>
      <p>Create and manage airline flights</p>
    </div>
  </div>

  <!-- ADD FLIGHT CARD -->
  <div class="card form-card">
    <h2>Add New Flight</h2>

    <div class="form-grid">

      <input placeholder="Flight Number"
             [(ngModel)]="newFlight.flightNumber">

      <!-- FROM -->
      <select [(ngModel)]="newFlight.departureAirportId">
        <option value="0">From Airport</option>
        @for(a of airports(); track a.airportId){
          <option [value]="a.airportId">{{a.airportName}}</option>
        }
      </select>

      <!-- TO -->
      <select [(ngModel)]="newFlight.arrivalAirportId">
        <option value="0">To Airport</option>
        @for(a of airports(); track a.airportId){
          <option [value]="a.airportId">{{a.airportName}}</option>
        }
      </select>

      <!-- VENDOR -->
      <select [(ngModel)]="newFlight.flightVendorId">
        <option value="0">Select Airline Vendor</option>
        @for(v of vendors(); track v.vendorId){
          <option [value]="v.vendorId">{{v.vendorName}}</option>
        }
      </select>

      <input type="number" placeholder="Ticket Price"
             [(ngModel)]="newFlight.price">

      <input type="number" placeholder="Total Seats"
             [(ngModel)]="newFlight.totalSeats">

      <div class="time-group">
        <label>Departure</label>
        <input type="time" [(ngModel)]="newFlight.departureTime">
      </div>

      <div class="time-group">
        <label>Arrival</label>
        <input type="time" [(ngModel)]="newFlight.arrivalTime">
      </div>

      <div class="date-group">
        <label>Travel Date</label>
        <input type="date" [(ngModel)]="newFlight.travelDate">
      </div>

    </div>

    <button class="primary-btn" (click)="addFlight()">+ Add Flight</button>
  </div>

  <!-- ALL FLIGHTS -->
  <div class="card table-card">
    <h2>All Flights</h2>

    @if(flights().length === 0){
      <p class="empty">No flights available</p>
    }

    <div class="flight-grid">

      @for(f of flights(); track f.flightId){
      <div class="flight-card">

        <div class="flight-top">
          <h3>{{f.flightNumber}}</h3>
          <span class="price">â‚¹ {{f.price}}</span>
        </div>

        <p class="route">
          {{f.departureAirportName}}
          <span>â†’</span>
          {{f.arrivalAirportName}}
        </p>

        <div class="meta">
          <span>ðŸª‘ {{f.totalSeats}} seats</span>
          <span>ðŸ“… {{f.travelDate | date:'dd MMM yyyy'}}</span>
        </div>

        <button class="delete-btn" (click)="deleteFlight(f.flightId)">
          Delete Flight
        </button>

      </div>
      }

    </div>
  </div>

</div>
